/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var missed = /* color: #98ff00 */ee.Geometry.MultiPolygon(
        [[[[61.05348082297057, 25.67232343118127],
           [61.057600696017445, 25.59927509520036],
           [61.38581724875182, 25.593082504818106],
           [61.38513060324401, 25.749656342878442],
           [61.11284460112815, 25.750049874646905],
           [61.10323156401878, 25.709843165786992],
           [61.0386868862844, 25.712936472201417],
           [61.0331937222219, 25.80137096969023],
           [60.9123441128469, 25.801989160766887],
           [60.915777340385965, 25.696231662381745],
           [61.05447973296409, 25.690662871526435]]],
         [[[61.21167749351837, 25.45370957811116],
           [61.212364139026185, 25.32033699237755],
           [61.38608545250275, 25.347643833257052],
           [61.39501184410431, 25.38673153259126],
           [61.432777347034, 25.39293476632055],
           [61.429344119494935, 25.503298935155268],
           [61.36479944176056, 25.512594662011026],
           [61.26866907066681, 25.504538406978657],
           [61.26386255211212, 25.474167665970374],
           [61.23639673179962, 25.461769240090398]]],
         [[[54.35969971267596, 26.7480567303603],
           [54.43660400955096, 26.700219377770097],
           [54.5595135554494, 26.700219377770097],
           [54.58217285720721, 26.722913962266574],
           [54.530674444121274, 26.749896226862948],
           [54.530674444121274, 26.817936659458844],
           [54.538914190215024, 26.865111901606046],
           [54.49565552322284, 26.897571745713684],
           [54.42699097244159, 26.930022263949287],
           [54.27180908767596, 26.936756107816223],
           [54.28691528884784, 26.881036763548114],
           [54.36793945876971, 26.85653604705898],
           [54.35420654861346, 26.76583728283509]]],
         [[[55.465425821428006, 18.747755662055265],
           [55.59039530384988, 18.750356497877846],
           [55.58146891224832, 18.855656617224863],
           [55.52104410756082, 18.869951546521193],
           [55.500444742326444, 18.899837004489644],
           [55.49083170521707, 18.94465518411394],
           [55.457186075334256, 18.903734714461535],
           [55.43864664662332, 18.868652057849822],
           [55.49357828724832, 18.8446097011543],
           [55.489458414201444, 18.771161741316536]]],
         [[[53.054614616458814, 27.61116951273094],
           [53.223872734134595, 27.54482886854928],
           [53.244815422122876, 27.588958994673433],
           [53.25889165503303, 27.598087149622714],
           [53.339572502201, 27.595957314785867],
           [53.355708671634595, 27.609344160485612],
           [53.2791476975135, 27.61360326841147],
           [53.23829228979866, 27.63246304120633],
           [53.213916374271314, 27.633071366882014],
           [53.175464225833814, 27.60417216396268],
           [53.12911565405647, 27.613299051908562],
           [53.094783378665845, 27.612386397330393]]],
         [[[48.57530162814781, 25.963457850403422],
           [48.57633159640953, 25.950492896655437],
           [48.61238048556969, 25.949566773885774],
           [48.616157035862656, 25.95604948027822],
           [48.63126323703453, 25.95111030778788],
           [48.62851665500328, 25.936909032661227],
           [48.643622856175156, 25.934747818938845],
           [48.649116020237656, 25.952036418415453],
           [48.63709972385094, 25.957901616530894],
           [48.61203716281578, 25.960679766259563],
           [48.59590099338219, 25.95944504114341],
           [48.580451469456406, 25.962223154436693]]],
         [[[56.035001369646146, 42.35838898280709],
           [56.067960354021146, 42.269024337595624],
           [56.13250503175552, 42.29645652878235],
           [56.262967678239896, 42.2497130435762],
           [56.301419826677396, 42.21717539136305],
           [56.342618557146146, 42.2730891195687],
           [56.430509182146146, 42.305597938260256],
           [56.47857436769302, 42.26699184831025],
           [56.48132094972427, 42.21005554397417],
           [56.54723891847427, 42.20496944729995],
           [56.58294448488052, 42.23547988476194],
           [56.598050686052396, 42.27105676134858],
           [56.64336928956802, 42.29645652878235],
           [56.707913967302396, 42.288329717314845],
           [56.77245864503677, 42.224294436120076],
           [56.86034927003677, 42.22124351522118],
           [57.00591811769302, 42.27105676134858],
           [56.985318752458646, 42.33605971768522],
           [56.955106350114896, 42.3888251980196],
           [56.84112319581802, 42.340120174009954],
           [56.74224624269302, 42.33301420338087],
           [56.666715236833646, 42.35838898280709],
           [56.589810939958646, 42.33707485634663],
           [56.455228420427396, 42.356359377363795],
           [56.38793716066177, 42.348240300082814],
           [56.33849868409927, 42.28629785060531],
           [56.284940334489896, 42.27410527410378],
           [56.210782619646146, 42.35229996982401],
           [56.10229262941177, 42.35432970636929]]],
         [[[30.855688632854996, 28.150618907377623],
           [30.88830429447609, 28.121251891823633],
           [30.927443088421402, 28.097631341375248],
           [30.92778641117531, 28.110956393959604],
           [30.94151932133156, 28.125793708967173],
           [30.971388400921402, 28.129124252568946],
           [30.968641818890152, 28.171201292984495],
           [30.93224960697609, 28.171503945592132],
           [30.92675644291359, 28.145472692606457],
           [30.906157077679214, 28.133968494869595],
           [30.88658768070656, 28.13820702724106],
           [30.88933426273781, 28.167266731174823],
           [30.871481479534683, 28.187845914807454],
           [30.83783584965187, 28.173925135629972]]]]),
    small = 
    /* color: #ffc82d */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[49.6624354937601, 31.41956203212078],
          [49.6624354937601, 24.856825575687214],
          [57.7923183062601, 24.856825575687214],
          [57.7923183062601, 31.41956203212078]]], null, false);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
var domain = ee.FeatureCollection('projects/gee-project-sylvia/assets/SEasia');
var image = ee.Image('projects/gee-project-sylvia/assets/SEasiaClimaAlt');
var colorizedVis = {
  min: 0,
  max: .039,
  palette: [
    'ffffff', 'ce7e45', 'df923d', 'f1b555', 'fcd163', '99b718', '74a901',
    '66a000', '529400', '3e8601', '207401', '056201', '004c00', '023b01',
    '012e01', '011d01', '011301'
  ],
};
//print(domain);
var dataset = ee.ImageCollection('MODIS/061/MOD09A1')
                  .filter(ee.Filter.date('2018-07-15', '2018-08-03'));
var reflectances =
    dataset.median().clip(domain);


var trueColorVis = {
  min: -100.0,
  max: 3000.0,
};


//Map.addLayer(trueColor, trueColorVis, 'True Color');
//Map.addLayer(image.select('Median'),colorizedVis,"test");

//Map.addLayer(domain);

 var fnp = "Reflectance_SW_Asia";
  var pxLen = 500;               // output pixel size (m)
  var	proj = 'EPSG:4326';        // WGS84 Geographic
  var fileFormat = 'GeoTIFF';
  var tileArea = 5120;           // max file size (pixels); must be multiple of shard size
  var shards = 512;              // unclear how this works/scales
  var maxPix = 10000000000000;   // max image size (not file size)
  Export.image.toDrive({         // geoTIFF
  image: reflectances,                  //
  description: fnp,            // 
  fileNamePrefix: fnp,   // 
  scale: pxLen,                // 500 m
  crs: proj,                   // WGS-84 Geographic
  maxPixels: maxPix,           // some huge, largely irrelevant number
  shardSize: shards,           // 256  (tile size / 10)
  fileDimensions: tileArea,    // 2560 (tile size)
  skipEmptyTiles: true,        // exclude masked areas in tiled output automatically
  fileFormat: fileFormat,      // geotiff
  region: domain,
  });
